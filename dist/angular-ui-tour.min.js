!function(a){"use strict";a.config(["$tooltipProvider",function(a){a.setTriggers({uiTourShow:"uiTourHide"})}])}(angular.module("bm.uiTour",["ui.bootstrap","smoothScroll"])),function(a){"use strict";a.provider("TourConfig",[function(){var a={prefixOptions:!1,prefix:"uiTour"};this.set=function(b,c){a[b]=c},this.$get=[function(){var b={};return b.get=function(b){return a[b]},b}]}])}(angular.module("bm.uiTour")),function(a){"use strict";a.controller("TourController",["$q","$injector","LinkedList",function(a,b,c){function d(a){var b=a.shift()();return a.forEach(function(a){b=b.then(a)}),b}window.ij=b;var e=this,f=c.create(!0),g=null,h=angular.noop,i={OFF:0,ON:1,PAUSED:2},j=i.OFF,k={};e.addStep=function(a){if(!f.contains(a)){var b=0;f.forEach(function(c,d,e){a.order>=c.data.order?b=d:e()}),f.insertAt(b+1,a),h(a)}},e.removeStep=function(a){f.remove(a)},e.start=function(){g=f.getHead(),j=i.ON,e.showStep(e.getCurrentStep())},e.end=function(){e.getCurrentStep()&&e.hideStep(e.getCurrentStep()),g=null,j=i.OFF},e.pause=function(){j=i.PAUSED,e.hideStep(e.getCurrentStep())},e.resume=function(){j=i.ON,e.showStep(e.getCurrentStep())},e.next=function(){var b=e.getCurrentStep();return d([b.onNext||k.onNext||a.resolve,function(){return e.hideStep(e.getCurrentStep())},function(){return g=g.next,e.getCurrentStep()?e.showStep(e.getCurrentStep()):void e.end()}])},e.prev=function(){var b=e.getCurrentStep();return d([b.onPrev||k.onPrev||a.resolve,function(){return e.hideStep(e.getCurrentStep())},function(){return g=g.prev,e.getCurrentStep()?e.showStep(e.getCurrentStep()):void e.end()}])},e.showStep=function(b){return d([b.onShow||k.onShow||a.resolve,b.show,b.onShown||k.onShown||a.resolve])},e.hideStep=function(b){return d([b.onHide||k.onHide||a.resolve,b.hide,b.onHidden||k.onHidden||a.resolve])},e.getCurrentStep=function(){return g?g.data:null},e.getNextStep=function(){return g&&g.next?g.next.data:null},e.getPrevStep=function(){return g&&g.prev?g.prev.data:null},e.waitFor=function(a){h=function(b){b.stepId===a&&(g=f.get(b),e.showStep(b))}},e.init=function(a){return k=a,e.options=k,e}}])}(angular.module("bm.uiTour")),function(a){"use strict";function b(){return["TourHelpers",function(a){return{restrict:"EA",scope:!0,controller:"TourController",link:function(b,c,d,e){var f,g={},h="onStart onEnd afterGetState afterSetState afterRemoveState onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),i="name container keyboard storage debug redirect duration basePath backdrop orphan".split(" ");a.attachInterpolatedValues(d,g,i),a.attachEventHandlers(b,d,g,h),f=a.attachTemplate(b,d,g),b.$watchCollection(e.getSteps,function(a){a&&(b.stepCount=a.length)}),d[a.getAttrName("options")]&&angular.extend(g,b.$eval(d[a.getAttrName("options")])),f.then(function(){b.tour=e.init(g)})}}}]}a.directive("tour",b()),a.directive("uiTour",b())}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("TourHelpers",["$templateCache","$http","$compile","TourConfig","$q",function(a,b,c,d,e){function f(a,b){return function(){var d=angular.element(a);return c(d)(b)}}function g(c,d){return b.get(c,{cache:a}).success(function(a){return a?f(a,d):""})}function h(a){return"true"===a?!0:"false"===a?!1:a}var i,j={};return i=j.safeApply=function(a,b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)},j.attachTemplate=function(a,b,c){var d,h=e.defer();return b[j.getAttrName("template")]?(d=f(a.$eval(b[j.getAttrName("template")]),a),c.template=d,h.resolve(d)):b[j.getAttrName("templateUrl")]?g(b[j.getAttrName("templateUrl")],a).then(function(a){a&&(c.template=a.data,h.resolve(a))}):h.resolve(),h.promise},j.attachEventHandlers=function(a,b,c,d){angular.forEach(d,function(d){b[j.getAttrName(d)]&&(c[d]=function(c){i(a,function(){a.$eval(b[j.getAttrName(d)])})})})},j.attachInterpolatedValues=function(a,b,c){angular.forEach(c,function(c){a[j.getAttrName(c)]&&(b[c]=h(a[j.getAttrName(c)]),a.$observe(j.getAttrName(c),function(a){b[c]=h(a)}))})},j.getAttrName=function(a){return d.get("prefixOptions")?d.get("prefix")+a.charAt(0).toUpperCase()+a.substr(1):a},j}])}(angular.module("bm.uiTour")),function(a){"use strict";function b(){return["TourHelpers","$location","uibPopoverTemplateDirective","$q","$timeout","smoothScroll",function(a,b,c,d,e,f){function g(a){return!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}var h=c[0];return{restrict:"EA",scope:!0,require:"^tour",link:function(c,e,i,j){function k(){var b;return i[a.getAttrName("skip")]&&(b=c.$eval(i[a.getAttrName("skip")])),b||(b=!!q.path||g(e[0])&&!i.availableWhenHidden),b}function l(e,f,g){var h=q[e];q[e]=function(e){return h&&h(e),j.waitFor(g),a.safeApply(c,function(){b.path(f)}),d.resolve()}}function m(b,c,d){angular.isDefined(i[a.getAttrName(b)])?i.$set(c,i[a.getAttrName(b)]):d&&i.$set(c,d)}var n,o,p,q={element:e,stepId:i.tourStep},r="onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),s="content title path animation container placement backdrop redirect orphan reflex duration nextStep prevStep nextPath prevPath".split(" ");a.attachInterpolatedValues(i,q,s),n=i.$observe(a.getAttrName("order"),function(a){q.order=isNaN(1*a)?0:1*a}),a.attachEventHandlers(c,i,q,r),p=a.attachTemplate(c,i,q),o=c.$watch(k,function(a){a?j.removeStep(q):j.addStep(q)}),c.$on("$destroy",function(){j.removeStep(q),n(),o()}),i[a.getAttrName("options")]&&angular.extend(q,c.$eval(i[a.getAttrName("options")])),q.nextPath&&(q.redirectNext=!0,l("onNext",q.nextPath,q.nextStep)),q.prevPath&&(q.redirectPrev=!0,l("onPrev",q.prevPath,q.prevStep)),m("title","popoverTitle"),m("placement","popoverPlacement"),m("templateUrl","uibPopoverTemplate","'tour-step-template.html'");var t="tour-step-"+Math.floor(1e4*Math.random());i.$set("popoverIsOpen","isOpen"),i.$set("popoverAnimation","false"),i.$set("popoverTrigger","uiTourShow"),i.$set("popoverClass",t),i.$set("popoverAppendToBody","true");var u;c.$watch("isOpen",function(a){if(a){var b=document.getElementsByClassName(t)[0];b.style.visibility="hidden",f(b,{offset:100,callbackAfter:function(){b.style.visibility="visible",u()}})}}),q.show=function(){return d(function(a){u=a,e[0].dispatchEvent(new Event("uiTourShow"))})},q.hide=function(){return d(function(a){e[0].dispatchEvent(new Event("uiTourHide")),a()})},p.then(function(){j.addStep(q),c.tourStep=q,c.tour=c.tour||j,h.compile()(c,e,i)})}}}]}a.directive("tourStep",b()),a.directive("uiTourStep",b())}(angular.module("bm.uiTour")),angular.module("bm.uiTour").run(["$templateCache",function(a){a.put("tour-step-template.html",'<div>\n    <div class="popover-content">{{tourStep.content}}</div>\n    <div class="popover-navigation">\n        <div class="btn-group">\n            <button class="btn btn-sm btn-default" data-role="prev" ng-click="tour.prev()">&laquo; Prev</button>\n            <button class="btn btn-sm btn-default" data-role="next" ng-click="tour.next()">Next &raquo;</button>\n            <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause"\n                    data-resume-text="Resume" ng-click="tour.pause()">Pause\n            </button>\n        </div>\n        <button class="btn btn-sm btn-default" data-role="end" ng-click="tour.end()">End tour</button>\n    </div>\n</div>\n')}]),function(a){"use strict";a.factory("Tour",[function(){return function(){return{}}}])}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("LinkedList",[function(){var a={};return a.create=function(a){function b(b){var c={data:b,next:null};return a&&(c.prev=null),c}var c=null,d=null,e=0;return{getHead:function(){return c},getTail:function(){return d},size:function(){return e},push:function(f){var g=b(f);d?(d.next=g,a&&(g.prev=d),d=g):c=d=g,e+=1},pop:function(){if(c){if(!c.next)return c=null,e-=1,!0;var a=c;do{if(!a.next.next)return a.next=null,d=a,e-=1,!0;a=a.next}while(a.next)}},unshift:function(f){var g=b(f);c?(g.next=c,a&&(c.prev=g),c=g):c=d=g,e+=1},shift:function(){c&&(c.next?(a&&(c.next.prev=null),c=c.next):c=d=null,e-=1)},insertAt:function(d,f){if(0===d||0===e)return this.unshift(f);if(d>=e)return this.push(f);for(var g=c,h=b(f),i=1;d>i;++i)g=g.next;a&&(g.next&&(g.next.prev=h),h.prev=g),h.next=g.next,g.next=h,e+=1},forEach:function(a){for(var b=0,d=c,e=!1;d&&!e;)a(d,b,function(){e=!0}),b+=1,d=d.next},remove:function(b){if(!c)return!1;var f=c;if(c.data===b)return this.shift();for(;f.next;){if(f.next.data===b)return f.next===d?this.pop():(a&&(f.next.next.prev=f),f.next=f.next.next,e-=1,!0);f=f.next}return!1},get:function(a){for(var b=c;b;){if(b.data===a)return b;b=b.next}return null},contains:function(a){var b=!1;return this.forEach(function(c){c.data===a&&(b=!0)}),b}}},a}])}(angular.module("bm.uiTour"));