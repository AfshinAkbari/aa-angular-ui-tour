!function(a){"use strict";a.config(["$uibTooltipProvider",function(a){a.setTriggers({uiTourShow:"uiTourHide"})}])}(angular.module("bm.uiTour",["ngSanitize","ui.bootstrap","smoothScroll"])),function(a){"use strict";a.provider("TourConfig",[function(){var a={prefixOptions:!0,prefix:"tourStep"};this.set=function(b,c){a[b]=c},this.$get=[function(){var b={};return b.get=function(b){return a[b]},b}]}])}(angular.module("bm.uiTour")),function(a){"use strict";a.controller("TourController",["$q","LinkedList",function(a,b){function c(a){var b=a.shift()();return a.forEach(function(a){b=b.then(a)}),b}var d,e=this,f=b.create(!0),g=null,h={OFF:0,ON:1,PAUSED:2},i=h.OFF,j={};e.addStep=function(a){if(!f.contains(a)){var b=0;f.forEach(function(c,d,e){a.order>=c.data.order?b=d:e()}),f.insertAt(b+1,a),d&&d(a)}},e.removeStep=function(a){f.remove(a)},e.reorderStep=function(a){e.removeStep(a),e.addStep(a)},e.start=function(){g=f.getHead(),i=h.ON,e.showStep(e.getCurrentStep())},e.end=function(){e.getCurrentStep()&&e.hideStep(e.getCurrentStep()),g=null,i=h.OFF},e.pause=function(){i=h.PAUSED,e.hideStep(e.getCurrentStep())},e.resume=function(){i=h.ON,e.showStep(e.getCurrentStep())},e.next=function(){var b=e.getCurrentStep();return c([b.onNext||j.onNext||a.resolve,function(){return e.hideStep(b)},function(){return g=e.getNextStepElement(),e.getCurrentStep()?e.showStep(e.getCurrentStep()):void e.end()}])},e.prev=function(){var b=e.getCurrentStep();return c([b.onPrev||j.onPrev||a.resolve,function(){return e.hideStep(b)},function(){return g=e.getPrevStepElement(),d?a.resolve():e.getCurrentStep()?e.showStep(e.getCurrentStep()):void e.end()}])},e.showStep=function(b){return c([b.onShow||j.onShow||a.resolve,b.show,b.onShown||j.onShown||a.resolve])},e.hideStep=function(b){return c([b.onHide||j.onHide||a.resolve,b.hide,b.onHidden||j.onHidden||a.resolve])},e.getCurrentStep=function(){return g?g.data:null},e.getNextStepElement=function(){return g?f.get(g.data).next:null},e.getPrevStepElement=function(){return g?f.get(g.data).prev:null},e.waitFor=function(a){e.pause(),d=function(b){b.stepId===a&&(g=f.get(b),e.resume(),d=null)}},e.init=function(a){return j=a,e.options=j,e}}])}(angular.module("bm.uiTour")),function(a){"use strict";function b(){return["TourHelpers",function(a){return{restrict:"EA",scope:!0,controller:"TourController",link:function(b,c,d,e){var f={},g="onStart onEnd afterGetState afterSetState afterRemoveState onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),h="name container keyboard storage debug redirect duration basePath backdrop orphan".split(" ");a.attachInterpolatedValues(d,f,h),a.attachEventHandlers(b,d,f,g),b.$watchCollection(e.getSteps,function(a){a&&(b.stepCount=a.length)}),d[a.getAttrName("options")]&&angular.extend(f,b.$eval(d[a.getAttrName("options")])),b.tour=e.init(f)}}}]}a.directive("tour",b()),a.directive("uiTour",b())}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("TourHelpers",["$templateCache","$http","$compile","$location","TourConfig","$q",function(a,b,c,d,e,f){function g(a){return"true"===a?!0:"false"===a?!1:a}var h,i={};return h=i.safeApply=function(a,b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)},i.attachEventHandlers=function(a,b,c,d){angular.forEach(d,function(d){b[i.getAttrName(d)]&&(c[d]=function(c){h(a,function(){a.$eval(b[i.getAttrName(d)])})})})},i.attachInterpolatedValues=function(a,b,c){angular.forEach(c,function(c){a[i.getAttrName(c)]&&(b[c]=g(a[i.getAttrName(c)]),a.$observe(i.getAttrName(c),function(a){b[c]=g(a)}))})},i.setRedirect=function(a,b,c,e,g){var h=a[c];a[c]=function(a){return f(function(c){h&&h(a),b.waitFor(g),d.path(e),c()})}},i.getAttrName=function(a){return e.get("prefixOptions")?e.get("prefix")+a.charAt(0).toUpperCase()+a.substr(1):a},i}])}(angular.module("bm.uiTour")),function(a){"use strict";a.directive("tourStep",["TourHelpers","$uibTooltip","$q","$sce",function(a,b,c,d){var e=b("tourStep","tourStep","uiTourShow",{popupDelay:1});return{restrict:"EA",scope:!0,require:"^tour",compile:function(b,f){f.tourStep||f.$set("tourStep","'PH'");var g=e.compile(b,f);return function(b,e,f,h){var i,j={element:e,stepId:f.tourStep},k="onShow onShown onHide onHidden onNext onPrev".split(" "),l="content title path animation container placement backdrop redirect orphan reflex duration nextStep prevStep nextPath prevPath".split(" ");a.attachInterpolatedValues(f,j,l),i=f.$observe(a.getAttrName("order"),function(a){j.order=isNaN(1*a)?0:1*a,h.reorderStep(j)}),a.attachEventHandlers(b,f,j,k),f[a.getAttrName("templateUrl")]&&(j.templateUrl=b.$eval(f[a.getAttrName("templateUrl")])),f[a.getAttrName("options")]&&angular.extend(j,b.$eval(f[a.getAttrName("options")])),j.nextPath&&(j.redirectNext=!0,a.setRedirect(j,h,"onNext",j.nextPath,j.nextStep)),j.prevPath&&(j.redirectPrev=!0,a.setRedirect(j,h,"onPrev",j.prevPath,j.prevStep)),j.show=function(){return c(function(a){e[0].dispatchEvent(new Event("uiTourShow")),a()})},j.hide=function(){return c(function(a){e[0].dispatchEvent(new Event("uiTourHide")),a()})},f.$set("tourStepAppendToBody","true"),j.trustedContent=d.trustAsHtml(j.content),h.addStep(j),b.tourStep=j,b.tour=b.tour||h,g(b,e,f),b.$on("$destroy",function(){h.removeStep(j),i()})}}}}]),a.directive("tourStepPopup",["TourConfig","smoothScroll",function(a,b){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:a.get("templateUrl")||"tour-step-popup.html",link:function(a,c){a.$watch("isOpen",function(a){a()&&b(c[0],{offset:100})})}}}])}(angular.module("bm.uiTour")),angular.module("bm.uiTour").run(["$templateCache",function(a){a.put("tour-step-popup.html",'<div class="popover tour-step"\n     tooltip-animation-class="fade"\n     uib-tooltip-classes\n     ng-class="{ in: isOpen() }">\n    <div class="arrow"></div>\n\n    <div class="popover-inner tour-step-inner">\n        <h3 class="popover-title tour-step-title" ng-bind="title" ng-if="title"></h3>\n        <div class="popover-content tour-step-content"\n             uib-tooltip-template-transclude="\'tour-step-template.html\'"\n             tooltip-template-transclude-scope="originScope()"></div>\n    </div>\n</div>\n'),a.put("tour-step-template.html",'<div>\n    <div class="popover-content tour-step-content" ng-bind-html="tourStep.trustedContent"></div>\n    <div class="popover-navigation tour-step-navigation">\n        <div class="btn-group">\n            <button class="btn btn-sm btn-default" data-role="prev" ng-click="tour.prev()">&laquo; Prev</button>\n            <button class="btn btn-sm btn-default" data-role="next" ng-click="tour.next()">Next &raquo;</button>\n            <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause"\n                    data-resume-text="Resume" ng-click="tour.pause()">Pause\n            </button>\n        </div>\n        <button class="btn btn-sm btn-default" data-role="end" ng-click="tour.end()">End tour</button>\n    </div>\n</div>\n')}]),function(a){"use strict";a.factory("Tour",[function(){return function(){return{}}}])}(angular.module("bm.uiTour")),function(a){"use strict";a.factory("LinkedList",[function(){var a={};return a.create=function(a){function b(b){var c={data:b,next:null};return a&&(c.prev=null),c}var c=null,d=null,e=0;return{getHead:function(){return c},getTail:function(){return d},size:function(){return e},push:function(f){var g=b(f);return d?(d.next=g,a&&(g.prev=d),d=g):c=d=g,e+=1,!0},pop:function(){if(c){if(!c.next)return c=null,e-=1,!0;var a=c;do{if(!a.next.next)return a.next=null,d=a,e-=1,!0;a=a.next}while(a.next)}},unshift:function(f){var g=b(f);return c?(g.next=c,a&&(c.prev=g),c=g):c=d=g,e+=1,!0},shift:function(){return c?(c.next?(a&&(c.next.prev=null),c=c.next):c=d=null,e-=1,!0):void 0},insertAt:function(d,f){if(0===d||0===e)return this.unshift(f);if(d>=e)return this.push(f);for(var g=c,h=b(f),i=1;d>i;++i)g=g.next;return a&&(g.next&&(g.next.prev=h),h.prev=g),h.next=g.next,g.next=h,e+=1,!0},forEach:function(a){for(var b=0,d=c,e=!1;d&&!e;)a(d,b,function(){e=!0}),b+=1,d=d.next},remove:function(b){if(!c)return!1;var f=c;if(c.data===b)return this.shift();for(;f.next;){if(f.next.data===b)return f.next===d?this.pop():(a&&(f.next.next.prev=f),f.next=f.next.next,e-=1,!0);f=f.next}return!1},get:function(a){for(var b=c;b;){if(b.data===a)return b;b=b.next}return null},contains:function(a){var b=!1;return this.forEach(function(c){c.data===a&&(b=!0)}),b},toArray:function(){for(var a=[],b=c;b;)a.push(b.data),b=b.next;return a}}},a}])}(angular.module("bm.uiTour"));